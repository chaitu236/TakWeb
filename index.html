<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <meta name="description" content="Play online Tak games. Tak is a strategy board game created by James Ernest and Patrick Rothfuss">
        <meta name="keywords" content="online tak, playtak, play tak">

        <title>Tak</title>

        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-68947366-1', 'auto');
            ga('send', 'pageview');

        </script>

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-tour.min.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="js/three.min.js"></script>
        <script src="js/OrbitControls.min.js"></script>
        <script src="js/helvetiker_regular.typeface.js"></script>
        <script src="js/linkify.min.js"></script>
        <script src="js/linkify-string.min.js"></script>

<!--        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>-->
        <script src="js/bootstrap.min.js"></script>
        <script src="js/bootstrap-tour.min.js"></script>
        
        <!-- Tak javascripts -->
        <script src="js/playtaktour.js"></script>
        <script src="js/settings.js"></script>
        <script src="js/board.js"></script>
        <script src="js/server.js"></script>
        
        <!-- Tak Stylesheet -->
        <link rel="stylesheet" href="css/tak.css">
    </head>
    <div class="device-xs hidden-xs"></div>
    <div class="device-sm hidden-sm"></div>
    <div class="device-md hidden-md"></div>
    <div class="device-lg hidden-lg"></div>

    <body style="border:1px solid #000000;">

        <!-- Static navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="#" data-toggle="modal" data-target="#help-modal">Help</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown"
                               title="Create a new empty board to play locally" aria-haspopup="true" aria-expanded="false"
                               id="scratchsize"> Scratch Board
                                <span class="caret"></span></a>

                            <ul class="dropdown-menu">
                                <li><a href="#" onclick="scratchbutton(3);">3x3</a></li>
                                <li><a href="#" onclick="scratchbutton(4);">4x4</a></li>
                                <li><a href="#" onclick="scratchbutton(5);">5x5</a></li>
                                <li><a href="#" onclick="scratchbutton(6);">6x6</a></li>
                                <li><a href="#" onclick="scratchbutton(7);">7x7</a></li>
                                <li><a href="#" onclick="scratchbutton(8);">8x8</a></li>
                            </ul>
                        </li>
                        <!--<li><a  class="visible-xs-block" title="Reverse view" class="hidden-xs" href="#" onclick="board.reverseboard()">Flip view</a></li>-->
                        <li><a id="loadtps" href="#" onclick="loadtpn()">Load TPS</a></li>
                        <li>
                          <a id="creategame" href="#" title="Create online game" onclick="$('#creategamemodal').modal('show')">New Game</a>
                        </li>
                        <li class="dropdown">
                            <a id="joingame" href="#" class="dropdown-toggle" role="button" data-toggle="dropdown"
                               title="Accept a seek" aria-haspopup="true" aria-expanded="false"> Join game
                                <span class="badge" id="seekcount">0</span>
                                <span class="caret"></span></a>
                            <ul id="seeklist" class="dropdown-menu scrollable-menu">
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a id="watch" href="#" class="dropdown-toggle" role="button" data-toggle="dropdown"
                               title="Observe a game" aria-haspopup="true" aria-expanded="false"> Watch
                                <span class="badge" id="gamecount">0</span>
                                <span class="caret"></span></a>
                            <ul id="gamelist" class="dropdown-menu scrollable-menu">
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" title="Mute/Un mute" role="button" onclick="volume_change()">
                            <!--<button type="button" class="btn btn-default">-->
                                <img id="volume-img" src="images/ic_volume_up_black_24px.svg" height="20" width="20"/>
                            <!--</button>-->
                            </a>
                            <audio id="move-sound">
                                <source src="audio/move.mp3" type="audio/mpeg">
                            </audio>
                            <audio id="chime-sound">
                                <source src="audio/chime.mp3" type="audio/mpeg">
                            </audio>
                        </li>
                        <li>
                            <a href="#" data-toggle="modal" data-target="#settings-modal">
                                <img id="settings-img" src="images/ic_settings_black_24px.svg" height="20" width="20"/>
                            </a>
                        </li>
                        <li>
                            <a href="#" title="Number of online players" >Online <span class="badge" id="onlineplayers">0</span></a>
                        </li>
                        <li>
                            <button id="login-button" type="button" class="btn btn-default navbar-btn" onclick="server.init()">Sign up / Login</button>
                        </li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </nav>

        <div id="floating">
            <a title="Click to show/hide menu" href="#" onclick="rmenu()">
                <!--<img src="images/ic_menu_black_24px.svg" height="30" width="30"/>-->
                <div id="notation-toggle-text" class="toggle-text">
                    <<<br>n<br>o<br>t<br>a<br>t<br>i<br>o<br>n
                </div>
            </a>
            <ul id="rmenu" style="list-style-type:none">
                <li class="center">
                    <div id="player-opp">
                    <img id="player-opp-img" src="images/player-white.png" height="20" width="20">
                    <div id="player-opp-name" class="player1-name">You</div>
                    </div>
                    <div id="player-opp-time" class="player1-time">0:00</div>
                </li>
                <li class="center">
                    <!--<a href="#" title="Reverse board" onclick="board.reverseboard()"><img src="images/ic_screen_rotation_black_24px.svg" width="25 height=25"></a>-->
                    <a href="#" title="Offer/Accept draw" class="btn" onclick="server.draw()"><img id="draw" src="images/offer-hand.png" width="25" height="25"></a>
                    <a href="#" title="Resign" class="btn" onclick="server.resign()"><img src="images/flag.svg" width="25" height="20"></a>
                </li>
                <li>
                    <div title="Notation for current game appears here" id="notationbar">
                        <!--<div class="center">Game notation</div>-->
                        <table id="moveslist">
                        </table>
                    </div>
                </li>
                <li class="center">
                    <div id="player-me">
                    <img id="player-me-img" src="images/player-black.png" height="20" width="20">
                    <div id="player-me-name" class="player2-name">You</div>
                    </div>
                    <div id="player-me-time" class="player2-time">0:00</div>
                </li>
            </ul>
        </div>

        <div id="chat-toggle-button">
            <a href="#" onclick="togglechat()">
                <!--<img src="images/ic_menu_black_24px.svg" width="24" height="24">-->
                <!--<div class="vertical-text">chat</div>-->
                <div id="chat-toggle-text" class="toggle-text">
                >><br>
                c<br>h<br>a<br>t
                </div>
            </a>
        </div>
        <div id="chat">
            <div class="form-group height-full">
                <div id="chat-server"></div>
            </div>
            <form role="form" onsubmit="server.chat(); return false;" class="height-auto" autocomplete="off">
              <input type="text" class="form-control" id="chat-me">
              <button id="send-button" type="submit" class="btn btn-primary">Send</button>
            </form>
        </div>

        <div>
            <canvas id="gamecanvas" style="border:1px solid #000000;"></canvas>
        </div>

<!--        <div id="status">
            <input id="status-inp" type="text">
            <button onclick="statusclick()">Ok</button>
        </div>-->

        <div id="alertbox">
            <div class="alerts">
                <div id="alert" class="alert alert-dismissible hidden" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <span id="alert-text">Text</span>
                </div>
            </div>
        </div>

        <div id="creategamemodal" class="modal fade" role="dialog">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row">
                          <div class="col-sm-12">
                            <div class="form-group">
                              <label for="boardsize"> Board Size</label>
                              <select class="form-control" id="boardsize">
                                <option>3x3</option>
                                <option>4x4</option>
                                <option selected="selected">5x5</option>
                                <option>6x6</option>
                                <option>7x7</option>
                                <option>8x8</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-sm-12">
                            <div class="form-group">
                              <label for="time">Time (minutes per player)</label>
                              <select class="form-control" id="timeselect">
                                <option>1</option>
                                <option>3</option>
                                <option>5</option>
                                <option selected="selected">10</option>
                                <option>15</option>
                                <option>20</option>
                                <option>30</option>
                                <option>60</option>
                                <option>180</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="row center">
                          <div class="col-sm-12">
                            <form role="form" onsubmit="server.seek(); return false;">
                              <button type="submit" class="btn btn-primary">Create</button>
                            </form>
                          </div>
                        </div>
                        <div class="row center">
                          <div class="col-sm-12">
                            <form role="form" onsubmit="server.removeseek(); return false;">
                              <br>
                              <button type="submit" class="btn btn-default">Remove Seeks</button>
                            </form>
                          </div>
                        </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="gameoveralert" class="modal fade" role="dialog">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-12 center" id="gameoveralert-text">
                            </div>
                        </div>
                        <div class="modal-footer center">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
           </div>
        </div>

        <div id="login" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row border">
                            <div class="col-sm-6">
                                <form role="form" onsubmit="server.login(); return false;">
                                    <div class="form-group">
                                        <label for="usr">Username</label>
                                        <input type="text" class="form-control" id="login-username">
                                    </div>
                                    <div class="form-group">
                                        <label for="pwd">Password:</label>
                                        <input type="password" class="form-control" id="login-pwd">
                                    </div>
                                    <div class="checkbox">
                                      <label><input id = "keeploggedin" type="checkbox" value="">Keep me logged in</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Login</button>
                                </form>
                            </div>
                            <div class="col-sm-6">
                                <form role="form" onsubmit="server.register(); return false;">
                                    <div class="form-group">
                                        <label for="usr">Username</label>
                                        <input type="text" class="form-control" id="register-username">
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email address:</label>
                                        <input type="email" class="form-control" id="register-email">
                                    </div>
                                    <div class="checkbox" style="visibility:hidden">
                                      <label><input type="checkbox" value="">Keep me logged in</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Sign up</button>
                                </form>
                            </div>
                        </div>
                        <div class="row center">
                            <br>Or<br><br>
                          <div class="col-sm-12">
                            <form role="form" onsubmit="server.guestlogin(); return false;">
                              <button type="submit" class="btn btn-default">Guest Login</button>
                            </form>
                          </div>
                        </div>
                        <div class="row center">
                          <div class="col-sm-12">
                            <div id="alert2" class="alert alert-dismissible hidden" role="alert">
                                <span id="alert-text2">Text</span>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="server.init()">Close</button>
                    </div>
                </div>

            </div>
        </div>

        <div id="settings-modal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Settings</h4>
                    </div>
                    <div class="modal-body">
                        <div class="split-container-left">
                          <p>
                            <b>
                              Board and Pieces
                            </b>
                            <br/>
                          </p>
                          <form>
                            <input id="wall-orientation" type="checkbox" onClick="checkboxDiagonalWalls()"/>
                            Diagonal walls
                          </form><br/>
                          <form>
                            Piece size
                            <input id="piece-size-slider" type="range" value="80" step="2" min="60" max="88" oninput="sliderPieceSize(this.value)" onChange="board.updatepieces()"/> 
                            <span id="piece-size-display">88</span>
                          </form><br/>
                          <form>
                            White pieces<br/>
                            <div class="radio-list-item">
                              <input id="piece-style-white-simple" type="radio" name="piece-style" checked/>
                              <img src="images/pieces/white_simple_pieces.png" class="radio-list-img" height="50" width="50" onClick="radioPieceStyleWhite('simple')"/>
                            </div>
                            <div class="radio-list-item">
                              <input id="piece-style-white-coral" type="radio" name="piece-style"/>
                              <img src="images/pieces/white_coral_pieces.png" class="radio-list-img" height="50" width="50" onClick="radioPieceStyleWhite('coral')"/>
                            </div>
                          </form><br/>
                          <form>
                            Black pieces<br/>
                            <div class="radio-list-item">
                              <input id="piece-style-black-simple" type="radio" name="piece-style" checked/>
                              <img src="images/pieces/black_simple_pieces.png" class="radio-list-img" height="50" width="50" onClick="radioPieceStyleBlack('simple')"/>
                            </div>
                            <div class="radio-list-item">
                              <input id="piece-style-black-pietersite" type="radio" name="piece-style"/>
                              <img src="images/pieces/black_pietersite_pieces.png" class="radio-list-img" height="50" width="50" onClick="radioPieceStyleBlack('pietersite')"/>
                            </div>
                          </form><br/>
                          <form>
                            White squares<br/>
                            <div class="radio-list-item">
                              <input id="board-style-white-simple" type="radio" name="board-style" checked/>
                              <img src="images/board/white_simple.png" class="radio-list-img" height="50" width="50" onClick="radioBoardStyleWhite('simple')"/>
                            </div>
                            
                            <div class="radio-list-item">
                              <input id="board-style-white-ornate" type="radio" name="board-style"/>
                              <img src="images/board/white_ornate.png" class="radio-list-img" height="50" width="50" onClick="radioBoardStyleWhite('ornate')"/>
                            </div>
                          </form><br/>
                          <form>
                            Black squares<br/>
                            <div class="radio-list-item">
                              <input id="board-style-black-simple" type="radio" name="board-style" checked/>
                              <img src="images/board/black_simple.png" class="radio-list-img" height="50" width="50" onClick="radioBoardStyleBlack('simple')" />
                            </div>
                            <div class="radio-list-item">
                              <input id="board-style-black-red-ornate" type="radio" name="board-style"/>
                              <img src="images/board/black_red-ornate.png" class="radio-list-img" height="50" width="50" onClick="radioBoardStyleBlack('red-ornate')"/>
                            </div>
                          </form>
                        </div>
                        <div class="split-container-right">
                          <p>
                            <b>
                              Interface
                            </b>
                            <br/>
                            <i>Some changes to the interface will require the page to be reloaded.</i><br/>
                          </p>
                          <form>
                            <input id="antialiasing-checkbox" type="checkbox" onClick="checkboxAntialiasing()"/>
                            Antialiasing (not recommended for slower devices)
                            <br/>
                            <br/>
                            <input id="hide-chat-time" type="checkbox" onClick="checkboxHideChatTime()"/>
                            Hide chat time
                            <br/>
                            <br/>
                            <input id="hide-send-checkbox" type="checkbox" onClick="checkboxHideSend()"/>
                            Hide 'Send' button
                            <br/>
                            <br/>
                            <input id="auto-open-chat-checkbox" type="checkbox" onClick="checkboxAutoOpenChat()" checked/>
                            Show/Hide chat on window resize
                            <br/>
                            <br/>
                            <input id="auto-rotate-checkbox" type="checkbox" onClick="checkboxAutoRotate()" checked/>
                            Rotate board when player 2
                          </form>
                        </div>
                        
                        <br/>
                    </div>
                </div>
            </div>
        </div>

        <div id="help-modal" class="modal fade">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Help</h4>
                    </div>
                    <div class="modal-body">
                        <ul>
                            <li><ul> Rules - the short version:
                                    <li>White goes first</li>
                                    <li>On first move, each player must place his opponent's tile</li>
                                    <li>Create a path with flat stones and capstones between any two opposite ends of the board</li>
                                    <li>Complete rules can be found <a target="_blank" href="http://cheapass.com/sites/default/files/TakBetaRules3-10-16.pdf">here</a> [PDF]</li>
                                    <li>You can learn about the game notation <a target="_blank" href="https://www.reddit.com/r/Tak/wiki/portable_tak_notation">here</a></li>
                                </ul></li>
                            <li><ul>Controls:
                                    <li>Left click-drag (or touch-drag) to rotate board</li>
                                    <li>Left click a piece to select it. Left click on it again (or right click) to rotate it</li>
                                    <li>Left click on a square to place selected piece or to pick up stack</li>
                                    <li>Right click on a stack to hide pieces on all other squares (to see stack clearly)</li>
                                    <li>Right click-drag to move the board. For touch devices, three-finger touch and drag</li>
                                    <li>Scroll wheel to zoom in/out. For touch devices, use two-finger pinch. Or use zoom buttons on bottom right.</li>
                                    <li>Current player to move is indicated by highlighting their name with a border</li>
                                    <li>If any of the above controls don't work, it means that control is invalid for current move</li>
                                </ul></li>
                            <li><ul>Play locally:
                                    <li>Select board size to create a new empty board on which you can play locally</li>
                                </ul></li>
                            <li><ul>Play online:
                                    <li>Login to server by clicking "Sign up/Login" button, signup and then login</li>
                                    <li>Post your seek by selecting board size in "Create game" menu or accept another player's
                                        seek by selecting it in "Join game" menu</li>
                                    <li>Click on one of any ongoing games from "Watch" menu to watch an ongoing game</li>
                                </ul></li>
                            <li><ul>About the game:
                                    <li>Rules for TAK are made by <a target="_blank" href="https://en.wikipedia.org/wiki/James_Ernest">James Ernest</a> and <a target="_blank" href="https://en.wikipedia.org/wiki/Patrick_Rothfuss">Patrick Rothfuss</a>. Visit <a target="_blank" href="http://cheapass.com/games/tak">cheapass.com</a> for more info</li>
                                    <li>Back the <b><a target="_blank" href="https://www.kickstarter.com/projects/cheapassgames/tak-a-beautiful-game">Tak Kickstarter!</a></b></li>
                                    <li>This is an unofficial implementation by <a target="_blank" href="https://github.com/chaitu236">Chaitanya Vadrevu (me)</a></li>
                                    <li>Front end code can be found <a target="_blank" href="https://github.com/chaitu236/TakWeb">here</a>,
                                    backend code <a target="_blank" href="https://github.com/chaitu236/TakServer">here</a></li>
                                    <li>Check out <a target="_blank" href="https://www.reddit.com/r/KingkillerChronicle/">these </a>
                                        - <a target="_blank" href="https://www.reddit.com/r/Tak/"> awesome</a> subreddits</li>
                                </ul></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="zoomcontrols">
            <a href="#" onclick="zoom(true)">
                <img src="images/ic_zoom_out_black_24px.svg" height="40" width="40"/>
            </a>
            <a href="#" onclick="zoom(false)">
                <img src="images/ic_zoom_in_black_24px.svg" height="40" width="40"/>
            </a>
            <a href="#" onclick="board.reverseboard()">
                <img src="images/ic_screen_rotation_black_24px.svg" height="35" width="35"/>
            </a>
            <a href="#" onclick="tour(true)">
                <img title="Take tour" src="images/bus.png" height="35" width="35"/>
            </a>
        </div>
        <script src="js/tak.js"/>
        <script>
          $(document).ready(function() {
              if(localStorage.getItem('sound')==='flase') {
                  volume_change();
              }
              if(localStorage.getItem('keeploggedin')==='true') {
                  server.init();
              }
              if(isBreakpoint('xs') || isBreakpoint('sm')) {
                  hidechat();
                  hidermenu();
              } else {
                  showchat();
                  showrmenu();
              }

              $('#chat').offset({ top: $('nav').height() + 5 });
              $('#chat-toggle-button').offset({ top: $('nav').height() + 7 });

              tour(false);
          })
        </script>
    </body>
</html>

